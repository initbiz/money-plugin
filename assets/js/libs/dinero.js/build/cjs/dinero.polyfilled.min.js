'use strict';function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var _global=createCommonjsModule(function(e){var t=e.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=t)}),_core=createCommonjsModule(function(e){var t=e.exports={version:'2.5.5'};'number'==typeof __e&&(__e=t)}),_core_1=_core.version,_isObject=function(e){return'object'==typeof e?null!==e:'function'==typeof e},_anObject=function(e){if(!_isObject(e))throw TypeError(e+' is not an object!');return e},_fails=function(e){try{return!!e()}catch(t){return!0}},_descriptors=!_fails(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a}),document$1=_global.document,is=_isObject(document$1)&&_isObject(document$1.createElement),_domCreate=function(e){return is?document$1.createElement(e):{}},_ie8DomDefine=!_descriptors&&!_fails(function(){return 7!=Object.defineProperty(_domCreate('div'),'a',{get:function(){return 7}}).a}),_toPrimitive=function(e,t){if(!_isObject(e))return e;var n,r;if(t&&'function'==typeof(n=e.toString)&&!_isObject(r=n.call(e)))return r;if('function'==typeof(n=e.valueOf)&&!_isObject(r=n.call(e)))return r;if(!t&&'function'==typeof(n=e.toString)&&!_isObject(r=n.call(e)))return r;throw TypeError('Can\'t convert object to primitive value')},dP=Object.defineProperty,f=_descriptors?Object.defineProperty:function(e,t,n){if(_anObject(e),t=_toPrimitive(t,!0),_anObject(n),_ie8DomDefine)try{return dP(e,t,n)}catch(t){}if('get'in n||'set'in n)throw TypeError('Accessors not supported!');return'value'in n&&(e[t]=n.value),e},_objectDp={f:f},_propertyDesc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_hide=_descriptors?function(e,t,n){return _objectDp.f(e,t,_propertyDesc(1,n))}:function(e,t,n){return e[t]=n,e},hasOwnProperty={}.hasOwnProperty,_has=function(e,t){return hasOwnProperty.call(e,t)},id=0,px=Math.random(),_uid=function(e){return'Symbol('.concat(e===void 0?'':e,')_',(++id+px).toString(36))},_redefine=createCommonjsModule(function(e){var t=_uid('src'),n='toString',r=Function[n],o=(''+r).split(n);_core.inspectSource=function(e){return r.call(e)},(e.exports=function(e,n,r,i){var a='function'==typeof r;a&&(_has(r,'name')||_hide(r,'name',n));e[n]===r||(a&&(_has(r,t)||_hide(r,t,e[n]?''+e[n]:o.join(n+''))),e===_global?e[n]=r:i?e[n]?e[n]=r:_hide(e,n,r):(delete e[n],_hide(e,n,r)))})(Function.prototype,n,function(){return'function'==typeof this&&this[t]||r.call(this)})}),_aFunction=function(e){if('function'!=typeof e)throw TypeError(e+' is not a function!');return e},_ctx=function(e,t,n){return(_aFunction(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:3===n?function(n,r,o){return e.call(t,n,r,o)}:function(){return e.apply(t,arguments)}},PROTOTYPE='prototype',$export=function(e,t,n){var r,o,i,a,s=e&$export.F,l=e&$export.G,c=e&$export.S,u=e&$export.P,d=e&$export.B,g=l?_global:c?_global[t]||(_global[t]={}):(_global[t]||{})[PROTOTYPE],m=l?_core:_core[t]||(_core[t]={}),p=m[PROTOTYPE]||(m[PROTOTYPE]={});for(r in l&&(n=t),n)o=!s&&g&&void 0!==g[r],i=(o?g:n)[r],a=d&&o?_ctx(i,_global):u&&'function'==typeof i?_ctx(Function.call,i):i,g&&_redefine(g,r,i,e&$export.U),m[r]!=i&&_hide(m,r,a),u&&p[r]!=i&&(p[r]=i)};_global.core=_core,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var _export=$export,toString={}.toString,_cof=function(e){return toString.call(e).slice(8,-1)},_iobject=Object('z').propertyIsEnumerable(0)?Object:function(e){return'String'==_cof(e)?e.split(''):Object(e)},_defined=function(e){if(e==void 0)throw TypeError('Can\'t call method on  '+e);return e},_toObject=function(e){return Object(_defined(e))},ceil=Math.ceil,floor=Math.floor,_toInteger=function(e){return isNaN(e=+e)?0:(0<e?floor:ceil)(e)},min=Math.min,_toLength=function(e){return 0<e?min(_toInteger(e),9007199254740991):0},_isArray=Array.isArray||function(e){return'Array'==_cof(e)},SHARED='__core-js_shared__',store=_global[SHARED]||(_global[SHARED]={}),_shared=function(e){return store[e]||(store[e]={})},_wks=createCommonjsModule(function(e){var t=_shared('wks'),n=_global.Symbol,r='function'==typeof n,o=e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:_uid)('Symbol.'+e))};o.store=t}),SPECIES=_wks('species'),_arraySpeciesConstructor=function(e){var t;return _isArray(e)&&(t=e.constructor,'function'==typeof t&&(t===Array||_isArray(t.prototype))&&(t=void 0),_isObject(t)&&(t=t[SPECIES],null===t&&(t=void 0))),void 0===t?Array:t},_arraySpeciesCreate=function(e,t){return new(_arraySpeciesConstructor(e))(t)},_arrayMethods=function(e,t){var n=1==e,r=4==e,o=6==e,i=t||_arraySpeciesCreate;return function(t,a,s){for(var l,c,u=_toObject(t),d=_iobject(u),g=_ctx(a,s,3),m=_toLength(d.length),p=0,y=n?i(t,m):2==e?i(t,0):void 0;m>p;p++)if((5==e||o||p in d)&&(l=d[p],c=g(l,p,u),e))if(n)y[p]=c;else if(c)switch(e){case 3:return!0;case 5:return l;case 6:return p;case 2:y.push(l);}else if(r)return!1;return o?-1:3==e||r?r:y}},_strictMethod=function(e,t){return!!e&&_fails(function(){t?e.call(null,function(){},1):e.call(null)})},$every=_arrayMethods(4);_export(_export.P+_export.F*!_strictMethod([].every,!0),'Array',{every:function(e){return $every(this,e,arguments[1])}});var every=_core.Array.every,UNSCOPABLES=_wks('unscopables'),ArrayProto=Array.prototype;ArrayProto[UNSCOPABLES]==void 0&&_hide(ArrayProto,UNSCOPABLES,{});var _addToUnscopables=function(e){ArrayProto[UNSCOPABLES][e]=!0},$find=_arrayMethods(6),KEY='findIndex',forced=!0;KEY in[]&&[,][KEY](function(){forced=!1}),_export(_export.P+_export.F*forced,'Array',{findIndex:function(e){return $find(this,e,1<arguments.length?arguments[1]:void 0)}}),_addToUnscopables(KEY);var findIndex=_core.Array.findIndex,$find$1=_arrayMethods(5),KEY$1='find',forced$1=!0;KEY$1 in[]&&[,][KEY$1](function(){forced$1=!1}),_export(_export.P+_export.F*forced$1,'Array',{find:function(e){return $find$1(this,e,1<arguments.length?arguments[1]:void 0)}}),_addToUnscopables(KEY$1);var find=_core.Array.find,_iterStep=function(e,t){return{value:t,done:!!e}},_iterators={},_toIobject=function(e){return _iobject(_defined(e))},_library=!1,max=Math.max,min$1=Math.min,_toAbsoluteIndex=function(e,t){return e=_toInteger(e),0>e?max(e+t,0):min$1(e,t)},_arrayIncludes=function(e){return function(t,n,r){var o,i=_toIobject(t),a=_toLength(i.length),s=_toAbsoluteIndex(r,a);if(e&&n!=n){for(;a>s;)if(o=i[s++],o!=o)return!0;}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},shared=_shared('keys'),_sharedKey=function(e){return shared[e]||(shared[e]=_uid(e))},arrayIndexOf=_arrayIncludes(!1),IE_PROTO=_sharedKey('IE_PROTO'),_objectKeysInternal=function(e,t){var n,r=_toIobject(e),o=0,i=[];for(n in r)n!=IE_PROTO&&_has(r,n)&&i.push(n);for(;t.length>o;)_has(r,n=t[o++])&&(~arrayIndexOf(i,n)||i.push(n));return i},_enumBugKeys=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'],_objectKeys=Object.keys||function(e){return _objectKeysInternal(e,_enumBugKeys)},_objectDps=_descriptors?Object.defineProperties:function(e,t){_anObject(e);for(var n,r=_objectKeys(t),o=r.length,a=0;o>a;)_objectDp.f(e,n=r[a++],t[n]);return e},document$2=_global.document,_html=document$2&&document$2.documentElement,IE_PROTO$1=_sharedKey('IE_PROTO'),Empty=function(){},PROTOTYPE$1='prototype',createDict=function(){var e,t=_domCreate('iframe'),n=_enumBugKeys.length,r='<',o='>';for(t.style.display='none',_html.appendChild(t),t.src='javascript:',e=t.contentWindow.document,e.open(),e.write(r+'script'+o+'document.F=Object'+r+'/script'+o),e.close(),createDict=e.F;n--;)delete createDict[PROTOTYPE$1][_enumBugKeys[n]];return createDict()},_objectCreate=Object.create||function(e,t){var n;return null===e?n=createDict():(Empty[PROTOTYPE$1]=_anObject(e),n=new Empty,Empty[PROTOTYPE$1]=null,n[IE_PROTO$1]=e),void 0===t?n:_objectDps(n,t)},def=_objectDp.f,TAG=_wks('toStringTag'),_setToStringTag=function(e,t,n){e&&!_has(e=n?e:e.prototype,TAG)&&def(e,TAG,{configurable:!0,value:t})},IteratorPrototype={};_hide(IteratorPrototype,_wks('iterator'),function(){return this});var _iterCreate=function(e,t,n){e.prototype=_objectCreate(IteratorPrototype,{next:_propertyDesc(1,n)}),_setToStringTag(e,t+' Iterator')},IE_PROTO$2=_sharedKey('IE_PROTO'),ObjectProto=Object.prototype,_objectGpo=Object.getPrototypeOf||function(e){return e=_toObject(e),_has(e,IE_PROTO$2)?e[IE_PROTO$2]:'function'==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?ObjectProto:null},ITERATOR=_wks('iterator'),BUGGY=!([].keys&&'next'in[].keys()),FF_ITERATOR='@@iterator',KEYS='keys',VALUES='values',returnThis=function(){return this},_iterDefine=function(e,t,n,r,o,i,a){_iterCreate(n,t,r);var s,l,c,u=function(e){return!BUGGY&&e in p?p[e]:e===KEYS?function(){return new n(this,e)}:e===VALUES?function(){return new n(this,e)}:function(){return new n(this,e)}},d=t+' Iterator',g=o==VALUES,m=!1,p=e.prototype,y=p[ITERATOR]||p[FF_ITERATOR]||o&&p[o],h=y||u(o),f=o?g?u('entries'):h:void 0,A='Array'==t?p.entries||y:y;if(A&&(c=_objectGpo(A.call(new e)),c!==Object.prototype&&c.next&&(_setToStringTag(c,d,!0),'function'!=typeof c[ITERATOR]&&_hide(c,ITERATOR,returnThis))),g&&y&&y.name!==VALUES&&(m=!0,h=function(){return y.call(this)}),(BUGGY||m||!p[ITERATOR])&&_hide(p,ITERATOR,h),_iterators[t]=h,_iterators[d]=returnThis,o)if(s={values:g?h:u(VALUES),keys:i?h:u(KEYS),entries:f},a)for(l in s)l in p||_redefine(p,l,s[l]);else _export(_export.P+_export.F*(BUGGY||m),t,s);return s},es6_array_iterator=_iterDefine(Array,'Array',function(e,t){this._t=_toIobject(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,_iterStep(1)):'keys'==t?_iterStep(0,n):'values'==t?_iterStep(0,e[n]):_iterStep(0,[n,e[n]])},'values');_iterators.Arguments=_iterators.Array,_addToUnscopables('keys'),_addToUnscopables('values'),_addToUnscopables('entries');var keys=_core.Array.keys,f$1=Object.getOwnPropertySymbols,_objectGops={f:f$1},f$2={}.propertyIsEnumerable,_objectPie={f:f$2},$assign=Object.assign,_objectAssign=!$assign||_fails(function(){var e={},t={},n=Symbol(),r='abcdefghijklmnopqrst';return e[n]=7,r.split('').forEach(function(e){t[e]=e}),7!=$assign({},e)[n]||Object.keys($assign({},t)).join('')!=r})?function(e){for(var t=_toObject(e),n=arguments.length,r=1,o=_objectGops.f,i=_objectPie.f;n>r;)for(var a,s=_iobject(arguments[r++]),l=o?_objectKeys(s).concat(o(s)):_objectKeys(s),c=l.length,u=0;c>u;)i.call(s,a=l[u++])&&(t[a]=s[a]);return t}:$assign;_export(_export.S+_export.F,'Object',{assign:_objectAssign});var assign=_core.Object.assign,isEnum=_objectPie.f,_objectToArray=function(e){return function(t){for(var n,r=_toIobject(t),o=_objectKeys(r),a=o.length,s=0,i=[];a>s;)isEnum.call(r,n=o[s++])&&i.push(e?[n,r[n]]:r[n]);return i}},$entries=_objectToArray(!0);_export(_export.S,'Object',{entries:function(e){return $entries(e)}});var entries=_core.Object.entries,floor$1=Math.floor,_isInteger=function(e){return!_isObject(e)&&isFinite(e)&&floor$1(e)===e};_export(_export.S,'Number',{isInteger:_isInteger});var isInteger=_core.Number.isInteger,_mathSign=Math.sign||function(e){return 0==(e=+e)||e!=e?e:0>e?-1:1};_export(_export.S,'Math',{sign:_mathSign});var sign=_core.Math.sign,TAG$1=_wks('toStringTag'),ARG='Arguments'==_cof(function(){return arguments}()),tryGet=function(e,t){try{return e[t]}catch(t){}},_classof=function(e){var t,n,r;return e===void 0?'Undefined':null===e?'Null':'string'==typeof(n=tryGet(t=Object(e),TAG$1))?n:ARG?_cof(t):'Object'==(r=_cof(t))&&'function'==typeof t.callee?'Arguments':r},test={};test[_wks('toStringTag')]='z',_redefine(Object.prototype,'toString',function(){return'[object '+_classof(this)+']'},!0);var _stringAt=function(e){return function(t,n){var r,o,a=_defined(t)+'',s=_toInteger(n),i=a.length;return 0>s||s>=i?e?'':void 0:(r=a.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(o=a.charCodeAt(s+1))||57343<o?e?a.charAt(s):r:e?a.slice(s,s+2):(r-55296<<10)+(o-56320)+65536)}},$at=_stringAt(!0);_iterDefine(String,'String',function(e){this._t=e+'',this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=$at(t,n),this._i+=e.length,{value:e,done:!1})});for(var ITERATOR$1=_wks('iterator'),TO_STRING_TAG=_wks('toStringTag'),ArrayValues=_iterators.Array,DOMIterables={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},collections=_objectKeys(DOMIterables),i=0;i<collections.length;i++){var key,NAME=collections[i],explicit=DOMIterables[NAME],Collection=_global[NAME],proto=Collection&&Collection.prototype;if(proto&&(proto[ITERATOR$1]||_hide(proto,ITERATOR$1,ArrayValues),proto[TO_STRING_TAG]||_hide(proto,TO_STRING_TAG,NAME),_iterators[NAME]=ArrayValues,explicit))for(key in es6_array_iterator)proto[key]||_redefine(proto,key,es6_array_iterator[key],!0)}var defer,channel,port,_anInstance=function(e,t,n,r){if(!(e instanceof t)||r!==void 0&&r in e)throw TypeError(n+': incorrect invocation!');return e},_iterCall=function(t,e,n,r){try{return r?e(_anObject(n)[0],n[1]):e(n)}catch(n){var o=t['return'];throw void 0!==o&&_anObject(o.call(t)),n}},ITERATOR$2=_wks('iterator'),ArrayProto$1=Array.prototype,_isArrayIter=function(e){return e!==void 0&&(_iterators.Array===e||ArrayProto$1[ITERATOR$2]===e)},ITERATOR$3=_wks('iterator'),core_getIteratorMethod=_core.getIteratorMethod=function(e){if(e!=void 0)return e[ITERATOR$3]||e['@@iterator']||_iterators[_classof(e)]},_forOf=createCommonjsModule(function(e){var t={},n={},r=e.exports=function(e,r,o,i,a){var s,l,c,u,d=a?function(){return e}:core_getIteratorMethod(e),g=_ctx(o,i,r?2:1),m=0;if('function'!=typeof d)throw TypeError(e+' is not iterable!');if(_isArrayIter(d)){for(s=_toLength(e.length);s>m;m++)if(u=r?g(_anObject(l=e[m])[0],l[1]):g(e[m]),u===t||u===n)return u;}else for(c=d.call(e);!(l=c.next()).done;)if(u=_iterCall(c,g,l.value,r),u===t||u===n)return u};r.BREAK=t,r.RETURN=n}),SPECIES$1=_wks('species'),_speciesConstructor=function(e,t){var n,r=_anObject(e).constructor;return r===void 0||(n=_anObject(r)[SPECIES$1])==void 0?t:_aFunction(n)},_invoke=function(e,t,n){var r=n===void 0;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);}return e.apply(n,t)},process=_global.process,setTask=_global.setImmediate,clearTask=_global.clearImmediate,MessageChannel=_global.MessageChannel,Dispatch=_global.Dispatch,counter=0,queue={},ONREADYSTATECHANGE='onreadystatechange',run=function(){var e=+this;if(queue.hasOwnProperty(e)){var t=queue[e];delete queue[e],t()}},listener=function(e){run.call(e.data)};setTask&&clearTask||(setTask=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return queue[++counter]=function(){_invoke('function'==typeof e?e:Function(e),t)},defer(counter),counter},clearTask=function(e){delete queue[e]},'process'==_cof(process)?defer=function(e){process.nextTick(_ctx(run,e,1))}:Dispatch&&Dispatch.now?defer=function(e){Dispatch.now(_ctx(run,e,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=_ctx(port.postMessage,port,1)):_global.addEventListener&&'function'==typeof postMessage&&!_global.importScripts?(defer=function(e){_global.postMessage(e+'','*')},_global.addEventListener('message',listener,!1)):ONREADYSTATECHANGE in _domCreate('script')?defer=function(e){_html.appendChild(_domCreate('script'))[ONREADYSTATECHANGE]=function(){_html.removeChild(this),run.call(e)}}:defer=function(e){setTimeout(_ctx(run,e,1),0)});var _task={set:setTask,clear:clearTask},macrotask=_task.set,Observer=_global.MutationObserver||_global.WebKitMutationObserver,process$1=_global.process,Promise$1=_global.Promise,isNode='process'==_cof(process$1),_microtask=function(){var t,n,r,e=function(){var e,o;for(isNode&&(e=process$1.domain)&&e.exit();t;){o=t.fn,t=t.next;try{o()}catch(o){throw t?r():n=void 0,o}}n=void 0,e&&e.enter()};if(isNode)r=function(){process$1.nextTick(e)};else if(Observer&&!(_global.navigator&&_global.navigator.standalone)){var o=!0,i=document.createTextNode('');new Observer(e).observe(i,{characterData:!0}),r=function(){i.data=o=!o}}else if(Promise$1&&Promise$1.resolve){var a=Promise$1.resolve();r=function(){a.then(e)}}else r=function(){macrotask.call(_global,e)};return function(e){var o={fn:e,next:void 0};n&&(n.next=o),t||(t=o,r()),n=o}};function PromiseCapability(e){var t,n;this.promise=new e(function(e,r){if(t!==void 0||n!==void 0)throw TypeError('Bad Promise constructor');t=e,n=r}),this.resolve=_aFunction(t),this.reject=_aFunction(n)}var f$3=function(e){return new PromiseCapability(e)},_newPromiseCapability={f:f$3},_perform=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}},_promiseResolve=function(e,t){if(_anObject(e),_isObject(t)&&t.constructor===e)return t;var n=_newPromiseCapability.f(e),r=n.resolve;return r(t),n.promise},_redefineAll=function(e,t,n){for(var r in t)_redefine(e,r,t[r],n);return e},SPECIES$2=_wks('species'),_setSpecies=function(e){var t=_global[e];_descriptors&&t&&!t[SPECIES$2]&&_objectDp.f(t,SPECIES$2,{configurable:!0,get:function(){return this}})},ITERATOR$4=_wks('iterator'),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR$4]();riter['return']=function(){SAFE_CLOSING=!0}}catch(t){}var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,_iterDetect=function(e,t){if(!t&&!SAFE_CLOSING)return!1;var n=!1;try{var r=[7],o=r[ITERATOR$4]();o.next=function(){return{done:n=!0}},r[ITERATOR$4]=function(){return o},e(r)}catch(t){}return n},task=_task.set,microtask=_microtask(),PROMISE='Promise',TypeError$1=_global.TypeError,process$2=_global.process,$Promise=_global[PROMISE],isNode$1='process'==_classof(process$2),empty=function(){},newPromiseCapability=newGenericPromiseCapability=_newPromiseCapability.f,USE_NATIVE=!!function(){try{var e=$Promise.resolve(1),t=(e.constructor={})[_wks('species')]=function(e){e(empty,empty)};return(isNode$1||'function'==typeof PromiseRejectionEvent)&&e.then(empty)instanceof t}catch(t){}}(),isThenable=function(e){var t;return!!(_isObject(e)&&'function'==typeof(t=e.then))&&t},notify=function(e,t){if(!e._n){e._n=!0;var n=e._c;microtask(function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,i,a,s=o?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{s?(!o&&(2==e._h&&onHandleUnhandled(e),e._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),a=!0)),n===t.promise?c(TypeError$1('Promise-chain cycle')):(i=isThenable(n))?i.call(n,l,c):l(n)):c(r)}catch(t){u&&!a&&u.exit(),c(t)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&onUnhandled(e)})}},onUnhandled=function(e){task.call(_global,function(){var t,n,r,o=e._v,i=isUnhandled(e);if(i&&(t=_perform(function(){isNode$1?process$2.emit('unhandledRejection',o,e):(n=_global.onunhandledrejection)?n({promise:e,reason:o}):(r=_global.console)&&r.error&&r.error('Unhandled promise rejection',o)}),e._h=isNode$1||isUnhandled(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},isUnhandled=function(e){return 1!==e._h&&0===(e._a||e._c).length},onHandleUnhandled=function(e){task.call(_global,function(){var t;isNode$1?process$2.emit('rejectionHandled',e):(t=_global.onrejectionhandled)&&t({promise:e,reason:e._v})})},$reject=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),notify(t,!0))},$resolve=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw TypeError$1('Promise can\'t be resolved itself');(t=isThenable(e))?microtask(function(){var r={_w:n,_d:!1};try{t.call(e,_ctx($resolve,r,1),_ctx($reject,r,1))}catch(t){$reject.call(r,t)}}):(n._v=e,n._s=1,notify(n,!1))}catch(t){$reject.call({_w:n,_d:!1},t)}}};USE_NATIVE||($Promise=function(e){_anInstance(this,$Promise,PROMISE,'_h'),_aFunction(e),Internal.call(this);try{e(_ctx($resolve,this,1),_ctx($reject,this,1))}catch(e){$reject.call(this,e)}},Internal=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=_redefineAll($Promise.prototype,{then:function(e,t){var n=newPromiseCapability(_speciesConstructor(this,$Promise));return n.ok='function'!=typeof e||e,n.fail='function'==typeof t&&t,n.domain=isNode$1?process$2.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&notify(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),OwnPromiseCapability=function(){var e=new Internal;this.promise=e,this.resolve=_ctx($resolve,e,1),this.reject=_ctx($reject,e,1)},_newPromiseCapability.f=newPromiseCapability=function(e){return e===$Promise||e===Wrapper?new OwnPromiseCapability(e):newGenericPromiseCapability(e)}),_export(_export.G+_export.W+_export.F*!USE_NATIVE,{Promise:$Promise}),_setToStringTag($Promise,PROMISE),_setSpecies(PROMISE),Wrapper=_core[PROMISE],_export(_export.S+_export.F*!USE_NATIVE,PROMISE,{reject:function(e){var t=newPromiseCapability(this),n=t.reject;return n(e),t.promise}}),_export(_export.S+_export.F*!USE_NATIVE,PROMISE,{resolve:function(e){return _promiseResolve(this,e)}}),_export(_export.S+_export.F*!(USE_NATIVE&&_iterDetect(function(e){$Promise.all(e)['catch'](empty)})),PROMISE,{all:function(e){var t=this,n=newPromiseCapability(t),r=n.resolve,o=n.reject,i=_perform(function(){var n=[],i=0,a=1;_forOf(e,!1,function(e){var s=i++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=newPromiseCapability(t),r=n.reject,o=_perform(function(){_forOf(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),_export(_export.P+_export.R,'Promise',{finally:function(t){var n=_speciesConstructor(this,_core.Promise||_global.Promise),e='function'==typeof t;return this.then(e?function(e){return _promiseResolve(n,t()).then(function(){return e})}:t,e?function(r){return _promiseResolve(n,t()).then(function(){throw r})}:t)}}),_export(_export.S,'Promise',{try:function(e){var t=_newPromiseCapability.f(this),n=_perform(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var promise=_core.Promise,Defaults={defaultAmount:0,defaultCurrency:'USD',defaultPrecision:2},Globals={globalLocale:'en-US',globalFormat:'$0,0.00',globalRoundingMode:'HALF_EVEN',globalFormatRoundingMode:'HALF_AWAY_FROM_ZERO',globalExchangeRatesApi:{endpoint:void 0,headers:void 0,propertyPath:void 0}},Static={normalizePrecision:function(e){var t=e.reduce(function(e,t){return Math.max(e.getPrecision(),t.getPrecision())});return e.map(function(e){return e.getPrecision()===t?e:e.convertPrecision(t)})}},_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e};function isNumeric(e){return!isNaN(parseInt(e))&&isFinite(e)}function isPercentage(e){return isNumeric(e)&&100>=e&&0<=e}function areValidRatios(e){return 0<e.length&&e.every(function(e){return 0<e})}function isEven(e){return 0==e%2}function isFloat(e){return isNumeric(e)&&!Number.isInteger(e)}function countFractionDigits(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=e.toString().split('.')[1];return t?t.length:0}function isHalf(e){return .5==Math.abs(e)%1}function getJSON(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,r){var o=Object.assign(new XMLHttpRequest,{onreadystatechange:function(){4===o.readyState&&(200<=o.status&&400>o.status?n(JSON.parse(o.responseText)):r(new Error(o.statusText)))},onerror:function(){r(new Error('Network error'))}});o.open('GET',e,!0),setXHRHeaders(o,t.headers),o.send()})}function setXHRHeaders(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};for(var n in t)e.setRequestHeader(n,t[n]);return e}function isUndefined(e){return'undefined'==typeof e}function flattenObject(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:'.',n={};return Object.entries(e).forEach(function(e){if('object'===_typeof(e[1])){var r=flattenObject(e[1]);Object.entries(r).forEach(function(r){n[e[0]+t+r[0]]=r[1]})}else n[e[0]]=e[1]}),n}function Calculator(){var e=Math.sign,t=Math.floor,n=Math.round,r=Math.abs,o=function(e,t){var r=function(e){return Math.pow(10,countFractionDigits(e))},o=Math.max(r(e),r(t));return n(e*o)*n(t*o)/(o*o)},i={HALF_ODD:function(e){var t=n(e);return isHalf(e)?isEven(t)?t-1:t:t},HALF_EVEN:function(e){var t=n(e);return isHalf(e)?isEven(t)?t:t-1:t},HALF_UP:function(e){return n(e)},HALF_DOWN:function(e){return isHalf(e)?t(e):n(e)},HALF_TOWARDS_ZERO:function(o){return isHalf(o)?e(o)*t(r(o)):n(o)},HALF_AWAY_FROM_ZERO:function(t){return isHalf(t)?e(t)*Math.ceil(r(t)):n(t)}};return{add:function(e,t){return e+t},subtract:function(e,t){return e-t},multiply:function(e,t){return isFloat(e)||isFloat(t)?o(e,t):e*t},divide:function(e,t){return e/t},modulo:function(e,t){return e%t},round:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'HALF_EVEN';return i[t](e)}}}var calculator=Calculator();function Format(e){var t=/^(?:(\$|USD)?0(?:(,)0)?(\.)?(0+)?|0(?:(,)0)?(\.)?(0+)?\s?(dollar)?)$/gm.exec(e);return{getMatches:function(){return null===t?[]:t.slice(1).filter(function(e){return!isUndefined(e)})},getMinimumFractionDigits:function(){var e=function(e){return'.'===e};return isUndefined(this.getMatches().find(e))?0:this.getMatches()[calculator.add(this.getMatches().findIndex(e),1)].split('').length},getCurrencyDisplay:function(){return{USD:'code',dollar:'name',$:'symbol'}[this.getMatches().find(function(e){return'USD'===e||'dollar'===e||'$'===e})]},getStyle:function(){return isUndefined(this.getCurrencyDisplay(this.getMatches()))?'decimal':'currency'},getUseGrouping:function(){return!isUndefined(this.getMatches().find(function(e){return','===e}))}}}function CurrencyConverter(e){var t=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:'',t=arguments[1];for(var n in t)e=e.replace('{{'+n+'}}',t[n]);return e};return{getExchangeRate:function(n,r){return getJSON(t(e.endpoint,{from:n,to:r}),{headers:e.headers}).then(function(o){return flattenObject(o)[t(e.propertyPath,{from:n,to:r})]})}}}function assert(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:new Error;if(!e)throw t}function assertPercentage(e){assert(isPercentage(e),new RangeError('You must provide a numeric value between 0 and 100.'))}function assertValidRatios(e){assert(areValidRatios(e),new TypeError('You must provide a non-empty array of numeric values greater than 0.'))}function assertInteger(e){assert(Number.isInteger(e),new TypeError('You must provide an integer.'))}var calculator$1=Calculator(),Dinero=function e(t){var n=Math.pow,r=Object.assign({},{amount:e.defaultAmount,currency:e.defaultCurrency,precision:e.defaultPrecision},t),o=r.amount,i=r.currency,a=r.precision;assertInteger(o),assertInteger(a);var s=e.globalLocale,l=e.globalFormat,c=e.globalRoundingMode,u=e.globalFormatRoundingMode,d=Object.assign({},e.globalExchangeRatesApi),g=function(t){var n=Object.assign({},Object.assign({},{amount:o,currency:i,precision:a},t),Object.assign({},{locale:this.locale},t));return Object.assign(e({amount:n.amount,currency:n.currency,precision:n.precision}),{locale:n.locale})},m=function(e){assert(this.hasSameCurrency(e),new TypeError('You must provide a Dinero instance with the same currency.'))};return{getAmount:function(){return o},getCurrency:function(){return i},getLocale:function(){return this.locale||s},setLocale:function(e){return g.call(this,{locale:e})},getPrecision:function(){return a},convertPrecision:function(e){return assertInteger(e),g.call(this,{amount:calculator$1.multiply(this.getAmount(),n(10,calculator$1.subtract(e,this.getPrecision()))),precision:e})},add:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return g.call(this,{amount:calculator$1.add(n[0].getAmount(),n[1].getAmount()),precision:n[0].getPrecision()})},subtract:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return g.call(this,{amount:calculator$1.subtract(n[0].getAmount(),n[1].getAmount()),precision:n[0].getPrecision()})},multiply:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c;return g.call(this,{amount:calculator$1.round(calculator$1.multiply(this.getAmount(),e),t)})},divide:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:c;return g.call(this,{amount:calculator$1.round(calculator$1.divide(this.getAmount(),e),t)})},percentage:function(e){return assertPercentage(e),this.multiply(calculator$1.divide(e,100))},allocate:function(e){var t=this;assertValidRatios(e);for(var n=e.reduce(function(e,t){return calculator$1.add(e,t)}),r=this.getAmount(),o=e.map(function(e){var o=Math.floor(calculator$1.divide(calculator$1.multiply(t.getAmount(),e),n));return r=calculator$1.subtract(r,o),g.call(t,{amount:o})}),a=0;0<r;a++)o[a]=o[a].add(g.call(this,{amount:1})),r=calculator$1.subtract(r,1);return o},convert:function(e,t){var n=this;return t=Object.assign({},d,t),CurrencyConverter(t).getExchangeRate(this.getCurrency(),e).then(function(r){return assert(!isUndefined(r),new TypeError('No rate was found for the destination currency "'+e+'".')),g.call(n,{amount:calculator$1.round(calculator$1.multiply(n.getAmount(),parseFloat(r)),t.roundingMode),currency:e})})},equalsTo:function(e){return this.hasSameAmount(e)&&this.hasSameCurrency(e)},lessThan:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return n[0].getAmount()<n[1].getAmount()},lessThanOrEqual:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return n[0].getAmount()<=n[1].getAmount()},greaterThan:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return n[0].getAmount()>n[1].getAmount()},greaterThanOrEqual:function(t){m.call(this,t);var n=e.normalizePrecision([this,t]);return n[0].getAmount()>=n[1].getAmount()},isZero:function(){return 0===this.getAmount()},isPositive:function(){return 0<=this.getAmount()},isNegative:function(){return 0>this.getAmount()},hasSubUnits:function(){return 0!==calculator$1.modulo(this.getAmount(),n(10,a))},hasCents:function(){return 0!==calculator$1.modulo(this.getAmount(),n(10,a))},hasSameCurrency:function(e){return this.getCurrency()===e.getCurrency()},hasSameAmount:function(t){var n=e.normalizePrecision([this,t]);return n[0].getAmount()===n[1].getAmount()},toFormat:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:l,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,n=Format(e);return this.toRoundedUnit(n.getMinimumFractionDigits(),t).toLocaleString(this.getLocale(),{currencyDisplay:n.getCurrencyDisplay(),useGrouping:n.getUseGrouping(),minimumFractionDigits:n.getMinimumFractionDigits(),style:n.getStyle(),currency:this.getCurrency()})},toUnit:function(){return calculator$1.divide(this.getAmount(),n(10,a))},toRoundedUnit:function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:u,r=n(10,e);return calculator$1.divide(calculator$1.round(calculator$1.multiply(this.toUnit(),r),t),r)},toObject:function(){return{amount:o,currency:i,precision:a}}}},Dinero$1=Object.assign(Dinero,Defaults,Globals,Static);module.exports=Dinero$1;
